{"version":3,"file":"src_app_pages_favourite_favourite_module_ts.js","mappings":";;;;;;;;;;;;;AAAA,iEAAe,wwBAAwwB;;;;;;;;;;;;;;;;;;;ACA9uB;AACc;AAEN;AAEjD,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,0DAAa;KACzB;CACF,CAAC;IAMW,0BAA0B,SAA1B,0BAA0B;CAAG;AAA7B,0BAA0B;IAJtC,uDAAQ,CAAC;QACR,OAAO,EAAE,CAAC,kEAAqB,CAAC,MAAM,CAAC,CAAC;QACxC,OAAO,EAAE,CAAC,yDAAY,CAAC;KACxB,CAAC;GACW,0BAA0B,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;AChBE;AACM;AACF;AAEA;AAE2B;AAEvB;AACP;IAY7B,mBAAmB,SAAnB,mBAAmB;CAAG;AAAtB,mBAAmB;IAV/B,uDAAQ,CAAC;QACN,OAAO,EAAE;YACL,yDAAY;YACZ,uDAAW;YACX,uDAAW;YACX,iFAA0B;YAC1B,iDAAY;SACf;QACH,YAAY,EAAE,CAAC,0DAAa,CAAC;KAC9B,CAAC;GACW,mBAAmB,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrBkB;AACX;AACuC;AACjB;AACE;AAEjB;IAMjC,aAAa,SAAb,aAAa;IAOxB,YACU,MAAc,EACd,GAAqB,EACrB,gBAA6B,EAC7B,UAAqB,EACrB,IAAoB;QAJpB,WAAM,GAAN,MAAM,CAAQ;QACd,QAAG,GAAH,GAAG,CAAkB;QACrB,qBAAgB,GAAhB,gBAAgB,CAAa;QAC7B,eAAU,GAAV,UAAU,CAAW;QACrB,SAAI,GAAJ,IAAI,CAAgB;QAV9B,QAAG,GAAgB,EAClB,CAAC;QACF,UAAK,GAAI,EAAE,CAAC;QACJ,OAAE,GAAG,IAAI,CAAC,gBAAgB,CAAC,MAAM,EAAE,CAAC;QAS1C,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;IAC1B,CAAC;IACK,eAAe;;YACnB,MAAM,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QAC/B,CAAC;KAAA;IAEK,gBAAgB;;YACpB,MAAM,IAAI,CAAC,OAAO,EAAE,CAAC;QACvB,CAAC;KAAA;IAEK,OAAO;;YACX,IAAI,IAAkB,CAAC;YACvB,gDAAgD;YAChD,MAAM,SAAS,GAAG,4DAAG,CAAC,IAAI,CAAC,UAAU,EAAE,cAAc,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;YAClE,MAAM,+DAAM,CAAC,SAAS,CAAC;iBACpB,IAAI,CAAC,IAAI,CAAC,EAAE,GAAK,IAAI,GAAG,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,OAAO,IAAI,CAAC,UAAU,CAAC,CAAC,OAAO,IAAI,CAAC,EAAE,CAAC,EAAC,CAAC,CAAC;YAClF,KAAK,MAAM,GAAG,IAAI,IAAI,EAAE;gBACtB,MAAM,UAAU,GAAG,4DAAG,CAAC,IAAI,CAAC,UAAU,EAAE,WAAW,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;gBAC5D,MAAM,WAAW,GAAG,MAAM,+DAAM,CAAC,UAAU,CAAC,CAAC;gBAC7C,MAAM,WAAW,GAAG,WAAW,CAAC,IAAI,EAAE,CAAC;gBACvC,IAAI,CAAC,KAAK,GAAG,WAAW,CAAC,KAAK,CAAC;gBAC/B,MAAM,QAAQ,GAAG,4DAAG,CAAC,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;gBAChE,MAAM,SAAS,GAAG,MAAM,+DAAM,CAAC,QAAQ,CAAC,CAAC;gBACzC,MAAM,SAAS,GAAG,SAAS,CAAC,IAAI,EAAE,CAAC;gBACnC,gDAAgD;gBAChD,MAAM,OAAO,GAAG,4DAAG,CAAC,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;gBAC9E,MAAM,OAAO,GAAG,MAAM,+DAAM,CAAC,OAAO,CAAC,CAAC;gBACtC,MAAM,QAAQ,GAAG,OAAO,CAAC,IAAI,EAAE,CAAC;gBAChC,IAAI,CAAC,GAAG,CAAC,IAAI,CACX;oBACE,IAAI,EAAE,QAAQ,CAAC,IAAI;oBACnB,KAAK,EAAE,SAAS,CAAC,IAAI;oBACrB,KAAK,EAAE,QAAQ,CAAC,KAAK;oBACrB,KAAK,EAAE,QAAQ,CAAC,QAAQ;oBACxB,MAAM,EAAE,GAAG;oBACX,OAAO,EAAE,WAAW,CAAC,KAAK;oBAC1B,EAAE,EAAE,GAAG;iBACR,CACF,CAAC;aACH;YACD,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QACxB,CAAC;KAAA;IACD,IAAI;QACF,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,cAAc,EAAE,EAAC,UAAU,EAAE,IAAI,EAAC,CAAC,CAAC;IAChE,CAAC;IACD,QAAQ;QACN,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;IACpC,CAAC;CACF;;YAzEO,mDAAM;YACN,4EAAgB;YAChB,oEAAW;YACN,8DAAS;YAEd,0DAAc;;AAMT,aAAa;IALzB,wDAAS,CAAC;QACT,QAAQ,EAAE,cAAc;QACxB,wNAAoC;;KAErC,CAAC;GACW,aAAa,CA8DzB;AA9DyB","sources":["./src/app/pages/favourite/favourite.page.html","./src/app/pages/favourite/favourite-routing.module.ts","./src/app/pages/favourite/favourite.module.ts","./src/app/pages/favourite/favourite.page.ts"],"sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-button color=\\\"primary\\\" (click)=\\\"back()\\\" routerDirection=\\\"forward\\\">\\n        <ion-icon name=\\\"chevron-back-outline\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <div class = ion-padding>\\n    <h1 class=\\\"title\\\">Favourites</h1>\\n    <ng-container *ngFor=\\\"let fav of fav\\\" style=\\\"margin-top: 20px\\\">\\n    <app-fav-card [fav]=\\\"fav\\\" (childEvent)=\\\"loadFav()\\\"></app-fav-card>\\n    </ng-container>\\n\\n  <ion-fab vertical=\\\"bottom\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\" (click) = \\\"goToCart()\\\">\\n    <ion-fab-button>\\n      <ion-icon name=\\\"cart-outline\\\"></ion-icon>\\n    </ion-fab-button>\\n  </ion-fab>\\n\\n  </div>\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { FavouritePage } from './favourite.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: FavouritePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class FavouritePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { FavouritePageRoutingModule } from './favourite-routing.module';\n\nimport { FavouritePage } from './favourite.page';\nimport {SharedModule} from \"../../shared\";\n\n@NgModule({\n    imports: [\n        CommonModule,\n        FormsModule,\n        IonicModule,\n        FavouritePageRoutingModule,\n        SharedModule\n    ],\n  declarations: [FavouritePage]\n})\nexport class FavouritePageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport {Router} from '@angular/router';\nimport {AngularFirestore, DocumentData} from \"@angular/fire/compat/firestore\";\nimport {AuthService} from \"../../services/auth/auth.service\";\nimport {doc, Firestore, getDoc} from \"@angular/fire/firestore\";\nimport {IFavCard} from \"../../shared/components/cards/fav-card/fav-card.component\";\nimport {MenuController} from \"@ionic/angular\";\n@Component({\n  selector: 'app-favorite',\n  templateUrl: './favourite.page.html',\n  styleUrls: ['./favourite.page.scss'],\n})\nexport class FavouritePage {\n\n  fav: IFavCard [] = [\n  ];\n  owner =  '';\n  private id = this.ionicAuthService.getUid();\n\n  constructor(\n    private router: Router,\n    private afs: AngularFirestore,\n    private ionicAuthService: AuthService,\n    private _firestore: Firestore,\n    private menu: MenuController\n  ) {\n    this.menu.enable(false);\n  }\n  async ionViewDidLeave() {\n    await this.menu.enable(true);\n  }\n\n  async ionViewWillEnter() {\n    await this.loadFav();\n  }\n\n  async loadFav() {\n    let data: DocumentData;\n    // eslint-disable-next-line no-underscore-dangle\n    const itemIdRef = doc(this._firestore, `favourites/${(this.id)}`);\n    await getDoc(itemIdRef)\n      .then(snap =>   { data = snap.data(); delete data.lastUpdate; delete data.id;});\n    for (const key in data) {\n      const idOwnerRef = doc(this._firestore, `idOwner/${(key)}`);\n      const idOwnerSnap = await getDoc(idOwnerRef);\n      const idOwnerName = idOwnerSnap.data();\n      this.owner = idOwnerName.owner;\n      const ownerRef = doc(this._firestore, `stores/${(this.owner)}`);\n      const ownerSnap = await getDoc(ownerRef);\n      const ownerName = ownerSnap.data();\n      // eslint-disable-next-line no-underscore-dangle\n      const dataRef = doc(this._firestore, `stores/${(this.owner)}/items/${(key)}`);\n      const docSnap = await getDoc(dataRef);\n      const dataSnap = docSnap.data();\n      this.fav.push(\n        {\n          name: dataSnap.name,\n          owner: ownerName.name,\n          price: dataSnap.price,\n          image: dataSnap.imageUrl,\n          itemId: key,\n          ownerId: idOwnerName.owner,\n          id: key,\n        },\n      );\n    }\n    console.log(this.fav);\n  }\n  back() {\n    this.router.navigateByUrl('tabs/account', {replaceUrl: true});\n  }\n  goToCart() {\n    this.router.navigate(['my-cart']);\n  }\n}\n"],"names":[],"sourceRoot":"webpack:///"}