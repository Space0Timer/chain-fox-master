{"version":3,"file":"src_app_pages_my-orders_my-orders_module_ts.js","mappings":"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","sources":["./src/app/pages/my-orders/my-orders.page.html","./src/app/pages/my-orders/my-orders-routing.module.ts","./src/app/pages/my-orders/my-orders.module.ts","./src/app/pages/my-orders/my-orders.page.ts"],"sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-button color=\\\"primary\\\" (click)=\\\"back()\\\" routerDirection=\\\"forward\\\">\\n        <ion-icon name=\\\"chevron-back-outline\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n    <ion-title>My Orders</ion-title>\\n  </ion-toolbar>\\n  <ion-toolbar *ngIf=\\\"!isEmpty\\\">\\n    <ion-searchbar animated=\\\"true\\\" debounce=\\\"800\\\" placeholder=\\\"Enter item name\\\" show-cancel-button=\\\"focus\\\" (ionChange)=\\\"_ionChange($event)\\\"></ion-searchbar>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content [fullscreen]=\\\"true\\\">\\n  <div class=\\\"order-items\\\" *ngIf=\\\"!isEmpty\\\">\\n    <ng-container *ngFor=\\\"let order of searchedItem\\\">\\n      <div>\\n        <app-order-card [order]=\\\"order\\\"></app-order-card>\\n      </div>\\n    </ng-container>\\n  </div>\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { MyOrdersPage } from './my-orders.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: MyOrdersPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class MyOrdersPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { MyOrdersPageRoutingModule } from './my-orders-routing.module';\n\nimport { MyOrdersPage } from './my-orders.page';\nimport {SharedModule} from \"../../shared\";\n\n@NgModule({\n    imports: [\n        CommonModule,\n        FormsModule,\n        IonicModule,\n        MyOrdersPageRoutingModule,\n        SharedModule\n    ],\n    declarations: [MyOrdersPage]\n})\nexport class MyOrdersPageModule {}\n","import {Component, OnInit} from '@angular/core';\nimport {Router} from '@angular/router';\nimport {IOrderCard} from '../../shared';\nimport {AuthService} from \"../../services/auth/auth.service\";\nimport {AngularFirestore} from \"@angular/fire/compat/firestore\";\nimport {ProductService} from \"../../services/store/product.service\";\nimport {collection, Firestore, getDocs, orderBy, query} from \"@angular/fire/firestore\";\nimport {format, parseISO} from 'date-fns';\nimport {MenuController} from \"@ionic/angular\";\n@Component({\n  selector: 'app-my-orders',\n  templateUrl: './my-orders.page.html',\n  styleUrls: ['./my-orders.page.scss'],\n})\nexport class MyOrdersPage implements OnInit{\n  order: IOrderCard [] = [\n  ];\n  owner = '';\n  isEmpty = true;\n  private id = this.ionicAuthService.getUid();\n  private searchedItem: any;\n  constructor(\n    private router: Router,\n    private ionicAuthService: AuthService,\n    private afs: AngularFirestore,\n    private product: ProductService,\n    private _firestore: Firestore,\n    private menu: MenuController\n  ) {\n    this.menu.enable(false);\n  }\n  async ionViewDidLeave() {\n    await this.menu.enable(true);\n  }\n\n  async ionViewWillEnter() {\n    this.order = [];\n    await this.addItemsToOrder();\n    this.searchedItem = this.order;\n    this.product.orderHistory = false;\n  }\n\n  _ionChange(event) {\n    const val = event.target.value;\n    this.searchedItem = this.order;\n    if (val && val.trim() !== '') {\n      this.searchedItem = this.searchedItem.filter((item: any) => (item.name.toLowerCase().indexOf(val.toLowerCase()) > -1));\n    }\n    // this.search.getInputElement().then(item => console.log(item))\n  }\n\n  async addItemsToOrder() {\n    const q = query(collection(this._firestore, `users/${(this.id)}/activeOrders`), orderBy('deliverTime', 'desc'));\n    const querySnapshot = await getDocs(q);\n    querySnapshot.forEach((docs) => {\n      console.log(docs.id, ' => ', docs.data());\n      this.order.push(\n        {\n          name: docs.data().itemName,\n          owner: docs.data().owner,\n          price: docs.data().price,\n          image: docs.data().imageUrl,\n          id: docs.data().orderId,\n          itemId: docs.data().itemId,\n          status: docs.data().status,\n          ownerId: docs.data().ownerId,\n          amountPaid: docs.data().amountPaid,\n          deliverTime: docs.data().deliverTime,\n          orderTime: docs.data().orderTime,\n          quantity: docs.data().quantity,\n          message: docs.data().message\n        },\n      );\n      this.isEmpty = false;\n    });\n\n\n  }\n\n  back() {\n    this.router.navigateByUrl('tabs/account', {replaceUrl: true});\n  }\n\n  ngOnInit(): void {\n  }\n}\n"],"names":[],"sourceRoot":"webpack:///"}