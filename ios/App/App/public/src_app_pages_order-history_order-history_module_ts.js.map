{"version":3,"file":"src_app_pages_order-history_order-history_module_ts.js","mappings":"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","sources":["./src/app/pages/order-history/order-history.page.html","./src/app/pages/order-history/order-history-routing.module.ts","./src/app/pages/order-history/order-history.module.ts","./src/app/pages/order-history/order-history.page.ts"],"sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-button color=\\\"primary\\\" (click)=\\\"back()\\\" routerDirection=\\\"forward\\\">\\n        <ion-icon name=\\\"chevron-back-outline\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n  <ion-toolbar>\\n    <ion-searchbar animated=\\\"true\\\" debounce=\\\"800\\\" placeholder=\\\"Enter item name\\\" show-cancel-button=\\\"focus\\\" (ionChange)=\\\"_ionChange($event)\\\"></ion-searchbar>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <h1 class=\\\"title\\\">Order History</h1>\\n\\n  <div class=\\\"order-items\\\">\\n    <ng-container *ngFor=\\\"let order of searchedItem\\\">\\n      <div>\\n        <app-order-card [order]=\\\"order\\\"></app-order-card>\\n      </div>\\n    </ng-container>\\n  </div>\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { OrderHistoryPage } from './order-history.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: OrderHistoryPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class OrderHistoryPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { OrderHistoryPageRoutingModule } from './order-history-routing.module';\n\nimport { OrderHistoryPage } from './order-history.page';\nimport {SharedModule} from '../../shared';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        FormsModule,\n        IonicModule,\n        OrderHistoryPageRoutingModule,\n        SharedModule\n    ],\n  declarations: [OrderHistoryPage]\n})\nexport class OrderHistoryPageModule {}\n","import {Component, OnInit} from '@angular/core';\nimport {Router} from '@angular/router';\nimport {IOrderCard} from '../../shared';\nimport {AuthService} from '../../services/auth/auth.service';\nimport {AngularFirestore} from '@angular/fire/compat/firestore';\nimport {ProductService} from '../../services/cafe/product.service';\nimport {collection, Firestore, getDocs} from '@angular/fire/firestore';\nimport {format, parseISO} from 'date-fns';\nimport {timestamp} from \"rxjs/operators\";\nimport {MenuController} from \"@ionic/angular\";\n@Component({\n  selector: 'app-my-orders',\n  templateUrl: './order-history.page.html',\n  styleUrls: ['./order-history.page.scss'],\n})\nexport class OrderHistoryPage {\n  order: IOrderCard [] = [\n  ];\n  owner = '';\n  private id = this.ionicAuthService.getUid();\n  private searchedItem: any;\n  constructor(\n    private router: Router,\n    private ionicAuthService: AuthService,\n    private afs: AngularFirestore,\n    private product: ProductService,\n    private _firestore: Firestore,\n    private menu: MenuController\n  ) {\n    this.menu.enable(false);\n  }\n  async ionViewDidLeave() {\n    await this.menu.enable(true);\n  }\n\n  async ionViewWillEnter() {\n    this.order = [];\n    await this.addItemsToOrder();\n  }\n  _ionChange(event) {\n    const val = event.target.value;\n    this.searchedItem = this.order;\n    if (val && val.trim() !== '') {\n      this.searchedItem = this.searchedItem.filter((item: any) => (item.name.toLowerCase().indexOf(val.toLowerCase()) > -1));\n    }\n    // this.search.getInputElement().then(item => console.log(item))\n  }\n\n  async addItemsToOrder() {\n    const q = collection(this._firestore, `users/${(this.id)}/allOrders`);\n    const querySnapshot = await getDocs(q);\n    querySnapshot.forEach((docs) => {\n      console.log(docs.id, ' => ', docs.data());\n      this.order.push(\n        {\n          name: docs.data().itemName,\n          owner: docs.data().owner,\n          price: docs.data().price,\n          image: docs.data().imageUrl,\n          id: docs.data().orderId,\n          itemId: docs.data().itemId,\n          ownerId: docs.data().ownerId,\n          status: docs.data().status,\n          amountPaid: docs.data().amountPaid,\n          deliverTime: docs.data().deliverTime,\n          orderTime: docs.data().orderTime,\n          quantity: docs.data().quantity\n        },\n      );\n    });\n  }\n\n  back() {\n    this.router.navigateByUrl('tabs/account', {replaceUrl: true});\n  }\n}\n"],"names":[],"sourceRoot":"webpack:///"}