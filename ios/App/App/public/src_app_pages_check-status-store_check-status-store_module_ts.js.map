{"version":3,"file":"src_app_pages_check-status-store_check-status-store_module_ts.js","mappings":"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","sources":["./src/app/pages/check-status-store/check-status-store.page.html","./src/app/pages/check-status-store/check-status-store-routing.module.ts","./src/app/pages/check-status-store/check-status-store.module.ts","./src/app/pages/check-status-store/check-status-store.page.ts"],"sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title>\\n      Track Orders\\n    </ion-title>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-icon (click)=\\\"back()\\\" color=\\\"primary\\\" slot=\\\"icon-only\\\" name=\\\"chevron-back-outline\\\"></ion-icon>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"doRefresh($event)\\\">\\n    <ion-refresher-content></ion-refresher-content>\\n  </ion-refresher>\\n  <ion-row style=\\\"padding-left: 0\\\">\\n    <ion-col size=\\\"10\\\">\\n      <ion-text  color=\\\"primary\\\" style=\\\"font-size: 26px; font-weight: bold\\\">Current Items</ion-text>\\n    </ion-col>\\n  </ion-row>\\n  <div class=\\\"center\\\">\\n    <div class = \\\"skill\\\">\\n      <div class = \\\"outer\\\">\\n        <div class = \\\"inner\\\">\\n          <div class = \\\"number\\\">\\n            {{this.product.percentage}}%\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n    <svg class = \\\"svg25\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"  width=\\\"160px\\\" height=\\\"160px\\\" *ngIf=\\\"this.product.percentage === 25\\\">\\n      <defs>\\n        <linearGradient id=\\\"GradientColor\\\">\\n          <stop offset=\\\"0%\\\" stop-color=\\\"#e91e63\\\" />\\n          <stop offset=\\\"100%\\\" stop-color=\\\"#673ab7\\\" />\\n        </linearGradient>\\n      </defs>\\n      <circle class = \\\"circle25\\\" cx=\\\"80\\\" cy=\\\"80\\\" r=\\\"70\\\" stroke-linecap=\\\"round\\\" />\\n    </svg>\\n    <svg class = \\\"svg50\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"  width=\\\"160px\\\" height=\\\"160px\\\" *ngIf=\\\"this.product.percentage === 50\\\">\\n      <defs>\\n        <linearGradient id=\\\"GradientColor\\\">\\n          <stop offset=\\\"0%\\\" stop-color=\\\"#e91e63\\\" />\\n          <stop offset=\\\"100%\\\" stop-color=\\\"#673ab7\\\" />\\n        </linearGradient>\\n      </defs>\\n      <circle class = \\\"circle50\\\" cx=\\\"80\\\" cy=\\\"80\\\" r=\\\"70\\\" stroke-linecap=\\\"round\\\" />\\n    </svg>\\n    <svg class = \\\"svg75\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"  width=\\\"160px\\\" height=\\\"160px\\\" *ngIf=\\\"this.product.percentage === 75\\\">\\n      <defs>\\n        <linearGradient id=\\\"GradientColor\\\">\\n          <stop offset=\\\"0%\\\" stop-color=\\\"#e91e63\\\" />\\n          <stop offset=\\\"100%\\\" stop-color=\\\"#673ab7\\\" />\\n        </linearGradient>\\n      </defs>\\n      <circle class = \\\"circle75\\\" cx=\\\"80\\\" cy=\\\"80\\\" r=\\\"70\\\" stroke-linecap=\\\"round\\\" />\\n    </svg>\\n    <svg class = \\\"svg100\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"  width=\\\"160px\\\" height=\\\"160px\\\" *ngIf=\\\"this.product.percentage === 100\\\">\\n      <defs>\\n        <linearGradient id=\\\"GradientColor\\\">\\n          <stop offset=\\\"0%\\\" stop-color=\\\"#e91e63\\\" />\\n          <stop offset=\\\"100%\\\" stop-color=\\\"#673ab7\\\" />\\n        </linearGradient>\\n      </defs>\\n      <circle class = \\\"circle100\\\" cx=\\\"80\\\" cy=\\\"80\\\" r=\\\"70\\\" stroke-linecap=\\\"round\\\" />\\n    </svg>\\n  </div>\\n  <ion-text>Order Status: {{this.product.statusName}}</ion-text>\\n  <div class=\\\"order-items\\\">\\n    <ion-card-content>\\n      <div class=\\\"item-info\\\">\\n        <p>Item Name: {{this.product.orderName}}</p>\\n        <p>User: {{this.product.user}}</p>\\n        <p>Price: RM {{this.product.price}}</p>\\n        <p>Order ID: {{this.product.orderId}}</p>\\n      </div>\\n    </ion-card-content>\\n  </div>\\n  <div class=\\\"ion-margin-vertical\\\">\\n    <ion-button\\n      [disabled]=\\\"(((this.icon==='Order fulfilled.' || this.icon==='Waiting for customer pick up.')))\\\"\\n      class=\\\"ion-margin-horizontal\\\"\\n      size=\\\"large\\\"\\n      expand=\\\"block\\\"\\n      shape=\\\"round\\\"\\n      color=\\\"primary\\\"\\n      (click)=\\\"informUser()\\\">\\n      <ion-text>{{this.icon}}</ion-text>\\n    </ion-button>\\n  </div>\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { CheckStatusStorePage } from './check-status-store.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CheckStatusStorePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class CheckStatusStorePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { CheckStatusStorePageRoutingModule } from './check-status-store-routing.module';\n\nimport { CheckStatusStorePage } from './check-status-store.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    CheckStatusStorePageRoutingModule\n  ],\n  declarations: [CheckStatusStorePage]\n})\nexport class CheckStatusStorePageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport {Router} from \"@angular/router\";\nimport {ProductService} from \"../../services/cafe/product.service\";\nimport {doc, Firestore, getDoc, setDoc} from \"@angular/fire/firestore\";\nimport {percentage} from \"@angular/fire/storage\";\nimport firebase from \"firebase/compat/app\";\nimport {getStyle} from \"chart.js/helpers\";\nimport {keyframes} from \"@angular/animations\";\nimport {AuthService} from \"../../services/auth/auth.service\";\nimport {AngularFirestore} from \"@angular/fire/compat/firestore\";\nimport {MenuController} from \"@ionic/angular\";\n\n@Component({\n  selector: 'app-check-status-store',\n  templateUrl: './check-status-store.page.html',\n  styleUrls: ['./check-status-store.page.scss'],\n})\nexport class CheckStatusStorePage implements OnInit {\n\n  percentage = 0;\n  orderStatus = '';\n  icon = '';\n  private id = this.ionicAuthService.getUid();\n  constructor(\n    private router: Router,\n    private product: ProductService,\n    private _firestore: Firestore,\n    private ionicAuthService: AuthService,\n    private afs: AngularFirestore,\n    private menu: MenuController\n  ) {     this.menu.enable(false);\n  }\n  async ionViewDidLeave() {\n    await this.menu.enable(true);\n  }\n\n  async ngOnInit() {\n    await this.changeIcon();\n    await this.updateStatus();\n  }\n\n  async doRefresh(event) {\n    await this.changeIcon();\n    await this.updateStatus();\n    setTimeout(() => {\n      event.target.complete();\n    }, 1000);\n  }\n  async updateStatus() {\n    try {\n      const orderRef = doc(this._firestore, `trackOrders/${(this.id)}/activeOrders/${(this.product.orderId)}`);\n      const orderSnap = await getDoc(orderRef);\n      const dataSnap = orderSnap.data();\n      this.product.status = dataSnap.status;\n      await this.product.changeStatus('status');\n    }\n    catch {\n      await this.router.navigate(['track-orders']);\n    }\n\n  }\n\n  changeIcon() {\n    switch (this.product.status) {\n      case 'paid':\n        this.icon = 'Start Preparing Order.';\n        break;\n      case 'prepare':\n        this.icon = 'Ask to Pick Up.';\n        break;\n      case 'done':\n        this.icon = 'Waiting for customer pick up.';\n        break;\n      case 'complete':\n        this.icon = 'Order fulfilled.';\n        break;\n    }\n  }\n\n  // change user order status\n  async informUser() {\n    switch (this.product.status) {\n      case 'paid':\n        this.product.status = 'prepare';\n        await this.afs.collection(`trackOrders/${(this.id)}/activeOrders`).doc(this.product.orderId).update({\n          status: this.product.status,\n          lastUpdate: firebase.firestore.FieldValue.serverTimestamp()\n        });\n        await this.afs.collection(`users/${(this.product.userId)}/activeOrders`).doc(this.product.orderId).update({\n          status: this.product.status,\n          lastUpdate: firebase.firestore.FieldValue.serverTimestamp()\n        });\n        await this.ngOnInit();\n        break;\n      case 'prepare':\n        this.product.status = 'done';\n        await this.afs.collection(`trackOrders/${(this.id)}/activeOrders`).doc(this.product.orderId).update({\n          status: this.product.status,\n          lastUpdate: firebase.firestore.FieldValue.serverTimestamp()\n        });\n        await this.afs.collection(`users/${(this.product.userId)}/activeOrders`).doc(this.product.orderId).update({\n          status: this.product.status,\n          lastUpdate: firebase.firestore.FieldValue.serverTimestamp()\n        });\n        await this.ngOnInit();\n        break;\n    }\n  }\n\n\n\n  back() {\n    this.router.navigate(['track-orders']);\n  }\n}\n"],"names":[],"sourceRoot":"webpack:///"}