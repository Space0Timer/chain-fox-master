{"version":3,"file":"src_app_pages_tabs_cafe_cafe_module_ts.js","mappings":"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","sources":["./src/app/pages/tabs/cafe/cafe.page.html","./src/app/pages/tabs/cafe/cafe-routing.module.ts","./src/app/pages/tabs/cafe/cafe.module.ts","./src/app/pages/tabs/cafe/cafe.page.ts"],"sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button autoHide=\\\"false\\\"></ion-menu-button>\\n      <ion-button (click) = \\\"qrCode()\\\">\\n        <ion-icon name=\\\"qr-code\\\" ></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n    <ion-title>\\n      <div class=\\\"title\\\">\\n        <img style=\\\"height: 30px\\\" src='assets/header/chainfoxcafe.png'>\\n      </div>\\n    </ion-title>\\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-button (click)=\\\"chat()\\\">\\n        <ion-icon name=\\\"chatbubbles-outline\\\"></ion-icon>\\n      </ion-button>\\n      <ion-button (click)=\\\"logOut()\\\">\\n        <ion-icon name=\\\"lock-closed\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n  <ion-toolbar class=\\\"ion-padding-top\\\">\\n    <ion-searchbar animated=\\\"true\\\" debounce=\\\"800\\\" placeholder=\\\"Enter store name\\\" show-cancel-button=\\\"focus\\\" (ionChange)=\\\"_ionChange($event)\\\"></ion-searchbar>\\n  </ion-toolbar>\\n</ion-header>\\n\\n\\n<ion-content [fullscreen]=\\\"true\\\" style=\\\"background-color: #F7F7FA\\\">\\n  <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"doRefresh($event)\\\">\\n    <ion-refresher-content></ion-refresher-content>\\n  </ion-refresher>\\n  <div class=\\\"p-1\\\">\\n    <ng-container *ngFor=\\\"let option of searchedItem\\\">\\n      <div>\\n        <app-main-option-card (click)=\\\"goToLunch(option.id)\\\" [option]=\\\"option\\\"></app-main-option-card>\\n      </div>\\n    </ng-container>\\n  </div>\\n</ion-content>\\n\\n\";","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { CafePage } from './cafe.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CafePage,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class CafePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IonicModule } from '@ionic/angular';\nimport { FormsModule } from '@angular/forms';\nimport { CafePage } from './cafe.page';\n\nimport { CafePageRoutingModule } from './cafe-routing.module';\nimport {SharedModule} from '../../../shared';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    CafePageRoutingModule,\n    SharedModule,\n  ],\n  declarations: [CafePage],\n})\nexport class CafePageModule {}\n","import {Component, OnInit} from '@angular/core';\nimport {IOption} from 'src/app/shared';\nimport { AuthService } from 'src/app/services/auth/auth.service';\nimport {Router} from '@angular/router';\nimport {AngularFirestore} from '@angular/fire/compat/firestore';\nimport {collection, doc, Firestore, getDoc, getDocs, query, setDoc} from '@angular/fire/firestore';\nimport {ProductService} from '../../../services/cafe/product.service';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: 'cafe.page.html',\n  styleUrls: ['cafe.page.scss'],\n})\nexport class CafePage implements OnInit{\n\n  successMsg = '';\n  errorMsg = '';\n\n  options: IOption[] = [\n  ];\n  private searchedItem: any;\n\n  constructor(\n    private ionicAuthService: AuthService,\n    private router: Router,\n    private afs: AngularFirestore,\n    private _firestore: Firestore,\n    private product: ProductService) {}\n\n  async ngOnInit() {\n    await this.addStoreToCafe();\n    this.searchedItem = this.options;\n  }\n  async doRefresh(event) {\n    await this.addStoreToCafe();\n    this.searchedItem = this.options;\n    setTimeout(() => {\n      event.target.complete();\n    }, 1000);\n  }\n  chat() {\n    this.router.navigate(['chat-list']);\n  }\n  qrCode() {\n    this.router.navigate(['qr-code']);\n  }\n\n  async addStoreToCafe() {\n    // eslint-disable-next-line no-underscore-dangle\n    const dataRef = collection(this._firestore, 'stores');\n    const q = query(dataRef);\n    const querySnapshot = await getDocs(q);\n    // eslint-disable-next-line @typescript-eslint/no-shadow\n    querySnapshot.forEach((doc) => {\n      const data = doc.data();\n      this.options.push(\n        {\n          name: data.name,\n          image: data.imageUrl,\n          id: data.id\n        }\n      );\n    });\n  }\n\n  _ionChange(event) {\n    const val = event.target.value;\n    this.searchedItem = this.options;\n    if (val && val.trim() !== '') {\n      this.searchedItem = this.searchedItem.filter((item: any) => (item.name.toLowerCase().indexOf(val.toLowerCase()) > -1));\n    }\n    // this.search.getInputElement().then(item => console.log(item))\n  }\n\n  logOut() {\n    this.ionicAuthService.logout()\n      .then((response) => {\n        this.errorMsg = '';\n        this.successMsg = 'Logout successful.';\n        this.goToLogin();\n      }, error => {\n        this.errorMsg = error.message;\n        this.successMsg = '';\n      });\n  }\n\n  goToLunch(storeName) {\n    this.product.store.name = storeName;\n    this.router.navigate(['lunch']);\n  }\n\n  goToLogin() {\n    this.router.navigate(['auth-screen']);\n  }\n\n\n\n\n}\n"],"names":[],"sourceRoot":"webpack:///"}