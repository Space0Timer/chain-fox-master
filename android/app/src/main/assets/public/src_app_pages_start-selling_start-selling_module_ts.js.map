{"version":3,"file":"src_app_pages_start-selling_start-selling_module_ts.js","mappings":";;;;;;;;;;;;;AAAA,iEAAe,m5CAAm5C,cAAc,02BAA02B;;;;;;;;;;;;;;;;;;;ACAjvE;AACc;AAEC;AAExD,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,iEAAgB;KAC5B;CACF,CAAC;IAMW,6BAA6B,SAA7B,6BAA6B;CAAG;AAAhC,6BAA6B;IAJzC,uDAAQ,CAAC;QACR,OAAO,EAAE,CAAC,kEAAqB,CAAC,MAAM,CAAC,CAAC;QACxC,OAAO,EAAE,CAAC,yDAAY,CAAC;KACxB,CAAC;GACW,6BAA6B,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;AChBD;AACM;AACiB;AAEnB;AAEkC;AAEvB;IAY3C,sBAAsB,SAAtB,sBAAsB;CAAG;AAAzB,sBAAsB;IAVlC,uDAAQ,CAAC;QACN,OAAO,EAAE;YACL,yDAAY;YACZ,uDAAW;YACX,uDAAW;YACX,wFAA6B;YAC7B,+DAAmB;SACtB;QACH,YAAY,EAAE,CAAC,iEAAgB,CAAC;KACjC,CAAC;GACW,sBAAsB,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpBe;AACgB;AACgB;AAC3C;AACwB;AACF;AAEE;IAQlD,gBAAgB,SAAhB,gBAAgB;IAgB3B,YAAoB,qBAA4C,EAC5C,MAAc,EACd,UAAqB,EACrB,gBAA6B,EAC7B,eAAgC,EAChC,IAAoB;QALpB,0BAAqB,GAArB,qBAAqB,CAAuB;QAC5C,WAAM,GAAN,MAAM,CAAQ;QACd,eAAU,GAAV,UAAU,CAAW;QACrB,qBAAgB,GAAhB,gBAAgB,CAAa;QAC7B,oBAAe,GAAf,eAAe,CAAiB;QAChC,SAAI,GAAJ,IAAI,CAAgB;QAnBxC,cAAS,GAAG,KAAK,CAAC;QAClB,iBAAY,GAAG,EAAE,CAAC;QAClB,iBAAY,GAAG,EAAE,CAAC;QAClB,SAAI,GAAG,EAAE,CAAC;QACV,aAAQ,GAAG,EAAE,CAAC;QAGd,SAAI,GAAG,KAAK,CAAC;QAIL,OAAE,GAAG,IAAI,CAAC,gBAAgB,CAAC,MAAM,EAAE,CAAC;QAEpC,QAAG,GAAG,IAAI,CAAC,gBAAgB,CAAC,MAAM,EAAE,CAAC;QAO3C,IAAI,CAAC,QAAQ,EAAE,CAAC;QAChB,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;IAC1B,CAAC;IACK,eAAe;;YACnB,MAAM,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QAC/B,CAAC;KAAA;IAED,QAAQ;IACR,CAAC;IAED,eAAe;IACf,WAAW,CAAC,KAAK;QACf,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,IAAI,CAAC,qBAAqB,CAAC,UAAU,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAC/D,CAAC,GAAQ,EAAE,EAAE;YACX,IAAI,GAAG,EAAE;gBACP,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;gBACjB,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC;gBACpB,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;gBACvB,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;gBAC/B,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;aACxB;QACH,CAAC,EACD,CAAC,KAAU,EAAE,EAAE;YACb,IAAI,CAAC,YAAY,GAAG,4CAA4C,CAAC;YACjE,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QACzB,CAAC,CACF,CAAC;IACJ,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,IAAI,GAAG,IAAI,qDAAS,CAAC;YACxB,IAAI,EAAE,IAAI,uDAAW,CAAC,IAAI,EAAE,EAAC,UAAU,EAAE,CAAC,+DAAmB,CAAC,EAAC,CAAC;SACjE,CAAC,CAAC;IACL,CAAC;IAED,UAAU;QACR,IAAI,CAAC,IAAI,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC;IACzB,CAAC;IAEK,QAAQ;;YACZ,IAAG,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE;gBACnB,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC;gBAC7B,OAAO;aACR;YACD,IAAG,IAAI,CAAC,QAAQ,KAAK,EAAE,EAAE;gBACvB,IAAI,CAAC,YAAY,GAAG,0DAA0D,CAAC;gBAC/E,OAAO;aACR;YACD,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;YACtB,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAC7B,MAAM,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAC/C,MAAM,IAAI,CAAC,gBAAgB,EAAE,CAAC;YAC9B,MAAM,IAAI,CAAC,iBAAiB,EAAE,CAAC;YAC/B,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACvB,MAAM,IAAI,CAAC,SAAS,CAAC,kBAAkB,EAAE,oBAAoB,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,mBAAmB,CAAC,CAAC;QAC9G,CAAC;KAAA;IAEK,kBAAkB,CAAC,SAAS;;YAChC,gDAAgD;YAChD,MAAM,OAAO,GAAG,4DAAG,CAAC,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;YAC7D,MAAM,+DAAM,CAAC,OAAO,EAAE;gBACpB,IAAI,EAAE,SAAS,CAAC,IAAI;gBACpB,QAAQ,EAAE,IAAI,CAAC,QAAQ;gBACvB,EAAE,EAAE,IAAI,CAAC,GAAG;aACb,CAAC,CAAC;QACL,CAAC;KAAA;IAEK,gBAAgB;;YACpB,MAAM,OAAO,GAAG,4DAAG,CAAC,IAAI,CAAC,UAAU,EAAE,cAAc,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;YACjE,MAAM,+DAAM,CAAC,OAAO,EAAE;gBACpB,EAAE,EAAE,IAAI,CAAC,GAAG;aACb,CAAC,CAAC;QACL,CAAC;KAAA;IAEK,iBAAiB;;YACrB,MAAM,OAAO,GAAG,4DAAG,CAAC,IAAI,CAAC,UAAU,EAAE,eAAe,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;YAClE,MAAM,+DAAM,CAAC,OAAO,EAAE;gBACpB,EAAE,EAAE,IAAI,CAAC,GAAG;aACb,CAAC,CAAC;QACL,CAAC;KAAA;IAED,IAAI;QACF,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,cAAc,EAAE,EAAC,UAAU,EAAE,IAAI,EAAC,CAAC,CAAC;IAChE,CAAC;IAEK,SAAS,CAAC,MAAM,EAAC,OAAO;;YAC5B,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;gBAC9C,MAAM;gBACN,OAAO;gBACP,OAAO,EAAE,CAAC,IAAI,CAAC;aAChB,CAAC,CAAC;YAEH,MAAM,KAAK,CAAC,OAAO,EAAE,CAAC;QACxB,CAAC;KAAA;CAEF;;YAnIO,yFAAqB;YACrB,mDAAM;YACD,8DAAS;YACd,oEAAW;YAEX,2DAAe;YAAE,0DAAc;;AAQ1B,gBAAgB;IAN5B,wDAAS,CAAC;QACT,QAAQ,EAAE,mBAAmB;QAC7B,4NAAwC;;KAEzC,CAAC;GAEW,gBAAgB,CAsH5B;AAtH4B","sources":["./src/app/pages/start-selling/start-selling.page.html","./src/app/pages/start-selling/start-selling-routing.module.ts","./src/app/pages/start-selling/start-selling.module.ts","./src/app/pages/start-selling/start-selling.page.ts"],"sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-button color=\\\"primary\\\" (click)=\\\"back()\\\" routerDirection=\\\"forward\\\">\\n        <ion-icon name=\\\"chevron-back-outline\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n    <ion-title>Setup Store</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <div class=\\\"ion-margin-horizontal\\\">\\n    <form [formGroup]=\\\"form\\\" class=\\\"ion-margin-vertical\\\">\\n      <div class=\\\"ion-margin-vertical\\\">\\n        <ion-item lines=\\\"full\\\">\\n          <ion-input formControlName=\\\"name\\\" [type]=\\\"type ? 'text' : 'text'\\\" placeholder=\\\"Enter store name\\\"></ion-input>\\n        </ion-item>\\n        <ion-text\\n          color=\\\"danger\\\"\\n          *ngIf=\\\"!form.get('name').valid && form.get('name').touched\\\">\\n          <ion-text\\n            class=\\\"error\\\"\\n            *ngIf=\\\"form.get('name').hasError('required')\\\">\\n            * Please enter the store name\\n          </ion-text>\\n        </ion-text>\\n      </div>\\n    </form>\\n\\n    <div>\\n      <form method=\\\"post\\\" enctype=\\\"multipart/form-data\\\">\\n        <div>\\n          <div><b>Upload a photo for your store front.</b></div><br/>\\n          <input type=\\\"file\\\" (change)=\\\"uploadPhoto($event)\\\" accept=\\\".png,.jpg\\\" multiple=\\\"true\\\"/>\\n          <div *ngIf=\\\"errorMessage\\\">\\n            <ion-text color=\\\"danger\\\">\\n              <ion-text\\n              class=\\\"error\\\">* {{errorMessage}}</ion-text>\\n            </ion-text>\\n          </div>\\n        </div>\\n      </form>\\n    </div>\\n    <div *ngIf=\\\"barStatus\\\">\\n      Uploading.....\\n    </div>\\n\\n    <div id=\\\"photoPreview\\\">\\n      <div *ngFor=\\\"let image of imageUploads\\\">\\n        <img loading=\\\"lazy\\\" [src]=\\\"image\\\" class=\\\"preview\\\"/>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"ion-margin-vertical\\\">\\n      <ion-button\\n        *ngIf=\\\"!isLoading\\\"\\n        size=\\\"large\\\"\\n        expand=\\\"block\\\"\\n        shape=\\\"round\\\"\\n        color=\\\"primary\\\"\\n        (click)=\\\"onSubmit()\\\">\\n        <ion-text>Confirm</ion-text>\\n      </ion-button>\\n      <ion-button\\n        *ngIf=\\\"isLoading\\\"\\n        size=\\\"large\\\"\\n        expand=\\\"block\\\"\\n        shape=\\\"round\\\"\\n        color=\\\"primary\\\">\\n        <ion-spinner></ion-spinner>\\n      </ion-button>\\n    </div>\\n  </div>\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { StartSellingPage } from './start-selling.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: StartSellingPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class StartSellingPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport {FormsModule, ReactiveFormsModule} from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { StartSellingPageRoutingModule } from './start-selling-routing.module';\n\nimport { StartSellingPage } from './start-selling.page';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        FormsModule,\n        IonicModule,\n        StartSellingPageRoutingModule,\n        ReactiveFormsModule\n    ],\n  declarations: [StartSellingPage]\n})\nexport class StartSellingPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport {FormControl, FormGroup, Validators} from \"@angular/forms\";\nimport {FirebaseUploadService} from \"../../services/cafe/firebase-upload.service\";\nimport {Router} from \"@angular/router\";\nimport {doc, Firestore, setDoc} from \"@angular/fire/firestore\";\nimport {AuthService} from \"../../services/auth/auth.service\";\nimport {AngularFirestore} from \"@angular/fire/compat/firestore\";\nimport {AlertController, MenuController} from \"@ionic/angular\";\n\n@Component({\n  selector: 'app-start-selling',\n  templateUrl: './start-selling.page.html',\n  styleUrls: ['./start-selling.page.scss'],\n})\n\nexport class StartSellingPage implements OnInit {\n\n  barStatus = false;\n  errorMessage = '';\n  imageUploads = [];\n  name = '';\n  imageUrl = '';\n\n  form: FormGroup;\n  type = false;\n  isLoading: boolean;\n  imageUploaded: boolean;\n\n  private id = this.ionicAuthService.getUid();\n\n  private uid = this.ionicAuthService.getUid();\n  constructor(private firebaseUploadService: FirebaseUploadService,\n              private router: Router,\n              private _firestore: Firestore,\n              private ionicAuthService: AuthService,\n              private alertController: AlertController,\n              private menu: MenuController) {\n    this.initForm();\n    this.menu.enable(false);\n  }\n  async ionViewDidLeave() {\n    await this.menu.enable(true);\n  }\n\n  ngOnInit() {\n  }\n\n  // Upload photo\n  uploadPhoto(event) {\n    this.barStatus = true;\n    this.firebaseUploadService.storeImage(event.target.files[0]).then(\n      (res: any) => {\n        if (res) {\n          console.log(res);\n          this.imageUrl = res;\n          this.imageUploads = [];\n          this.imageUploads.unshift(res);\n          this.barStatus = false;\n        }\n      },\n      (error: any) => {\n        this.errorMessage = 'File size exceeded. Maximum file size 1 MB';\n        this.barStatus = false;\n      }\n    );\n  }\n\n  initForm() {\n    this.form = new FormGroup({\n      name: new FormControl(null, {validators: [Validators.required]}),\n    });\n  }\n\n  changeType() {\n    this.type = !this.type;\n  }\n\n  async onSubmit() {\n    if(!this.form.valid) {\n      this.form.markAllAsTouched();\n      return;\n    }\n    if(this.imageUrl === '') {\n      this.errorMessage = 'You must upload an image for your storefront to proceed.';\n      return;\n    }\n    this.isLoading = true;\n    console.log(this.form.value);\n    await this.uploadStoreDetails(this.form.value);\n    await this.createTrackSales();\n    await this.createTrackOrders();\n    this.isLoading = false;\n    await this.showAlert('Creation Success', 'Your online store ' + this.form.value.name + ' has been created');\n  }\n\n  async uploadStoreDetails(formValue) {\n    // eslint-disable-next-line no-underscore-dangle\n    const dataRef = doc(this._firestore, `stores/${(this.uid)}`);\n    await setDoc(dataRef, {\n      name: formValue.name,\n      imageUrl: this.imageUrl,\n      id: this.uid,\n    });\n  }\n\n  async createTrackSales() {\n    const dataRef = doc(this._firestore, `trackSales/${(this.uid)}`);\n    await setDoc(dataRef, {\n      id: this.uid,\n    });\n  }\n\n  async createTrackOrders() {\n    const dataRef = doc(this._firestore, `trackOrders/${(this.uid)}`);\n    await setDoc(dataRef, {\n      id: this.uid,\n    });\n  }\n\n  back() {\n    this.router.navigateByUrl('tabs/account', {replaceUrl: true});\n  }\n\n  async showAlert(header,message) {\n    const alert = await this.alertController.create({\n      header,\n      message,\n      buttons: ['OK'],\n    });\n\n    await alert.present();\n  }\n\n}\n"],"names":[],"sourceRoot":"webpack:///"}