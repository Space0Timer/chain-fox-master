{"version":3,"file":"default-src_app_shared_components_modal_customise-order_customise-order_page_ts.js","mappings":"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","sources":["./src/app/shared/components/modal/customise-order/customise-order.page.html","./src/app/shared/components/modal/customise-order/customise-order.page.ts"],"sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-button color=\\\"primary\\\" (click)=\\\"back()\\\" routerDirection=\\\"forward\\\">\\n        <ion-icon name=\\\"close-outline\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n    <ion-title>\\n      Name: {{this.name}}\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-card mode=\\\"ios\\\" class=\\\"ion-padding\\\" *ngIf=\\\"this.product.customNew\\\">\\n    <ion-row>\\n      <ion-col size=\\\"10\\\">\\n        <ion-card-title style=\\\"font-size: 18px; padding-top: 3px\\\" >Edit Customisation Name</ion-card-title>\\n      </ion-col>\\n      <ion-col size=\\\"2\\\" class=\\\"ion-text-right\\\">\\n        <ion-buttons>\\n          <ion-button  (click)=\\\"addName()\\\">\\n            <ion-icon name=\\\"add-circle-outline\\\"></ion-icon>\\n          </ion-button>\\n        </ion-buttons>\\n      </ion-col>\\n    </ion-row>\\n  </ion-card>\\n  <ion-list lines=\\\"none\\\">\\n    <form [formGroup]=\\\"form\\\">\\n      <ion-item *ngFor=\\\"let control of form.controls | keyvalue\\\">\\n        <ion-input requiredtype=\\\"text\\\" [formControlName]=\\\"control.key\\\" placeHolder=\\\"option names...\\\"></ion-input>\\n        <ion-icon (click)=\\\"removeControl(control)\\\" name=\\\"close-circle\\\"></ion-icon>\\n        <ion-text\\n          color=\\\"danger\\\"\\n          *ngIf=\\\"!form.get(control.key).valid && form.get(control.key).touched\\\">\\n          <ion-text\\n            class=\\\"error\\\"\\n            *ngIf=\\\"form.get(control.key).hasError('required')\\\">\\n            * Please enter your option name\\n          </ion-text>\\n          <ion-text\\n            class=\\\"error\\\"\\n            *ngIf=\\\"form.get(control.key).hasError('pattern')\\\">\\n            * Invalid option name. Only characters a-z and A-Z are allowed.\\n          </ion-text>\\n          <ion-text\\n            class=\\\"error\\\"\\n            *ngIf=\\\"!form.get(control.key).hasError('required') &&!form.get('username').hasError('pattern') && form.get('username').hasError('minlength')\\\">\\n            * Invalid option name. Your option must have at least 6 characters.\\n          </ion-text>\\n          <ion-text\\n            class=\\\"error\\\"\\n            *ngIf=\\\"!form.get('username').hasError('required') && !form.get('username').hasError('pattern') && !form.get('username').hasError('minlength') && form.get('username').hasError('maxlength')\\\">\\n            * Invalid option name. Your username must have at most 15 characters.\\n          </ion-text>\\n        </ion-text>\\n      </ion-item>\\n    </form>\\n  </ion-list>\\n\\n  <ion-button expand=\\\"full\\\" color=\\\"light\\\" (click)=\\\"addControl()\\\">Add Option</ion-button>\\n  <div class=\\\"ion-margin-horizontal\\\">\\n    <ion-button\\n      *ngIf=\\\"!isLoading\\\"\\n      size=\\\"large\\\"\\n      expand=\\\"block\\\"\\n      shape=\\\"round\\\"\\n      color=\\\"primary\\\" (click)=\\\"submitRequest()\\\">\\n      Confirm\\n    </ion-button>\\n    <ion-button\\n      *ngIf=\\\"isLoading\\\"\\n      size=\\\"large\\\"\\n      expand=\\\"block\\\"\\n      shape=\\\"round\\\"\\n      color=\\\"primary\\\">\\n      <ion-spinner></ion-spinner>\\n    </ion-button>\\n  </div>\\n</ion-content>\\n\";","import { Component, OnInit } from '@angular/core';\nimport {FormBuilder, FormControl, FormGroup, Validators} from '@angular/forms';\nimport {AlertController, ModalController} from '@ionic/angular';\nimport {AngularFirestore} from '@angular/fire/compat/firestore';\nimport {AuthService} from '../../../../services/auth/auth.service';\nimport {CustomOptions, ProductService} from \"../../../../services/cafe/product.service\";\n\n\n@Component({\n  selector: 'app-customise-order',\n  templateUrl: './customise-order.page.html',\n  styleUrls: ['./customise-order.page.scss'],\n})\nexport class CustomiseOrderPage{\n  customOptions: CustomOptions [] = [];\n  isLoading = false;\n  type = false;\n  name = 'Not set';\n  public form: FormGroup;\n  private optionCount = 1;\n  private keys: any;\n\n  constructor(private formBuilder: FormBuilder,\n              private modalController: ModalController,\n              private product: ProductService,\n              private alertController: AlertController){\n\n   }\n\n  ionViewWillEnter() {\n    this.init();\n  }\n\n  init() {\n    if (this.product.customOption.length === 0) {\n      this.form = this.formBuilder.group({\n        1: ['', [Validators.required, Validators.pattern('^[a-zA-Z]+$'), Validators.maxLength(10), Validators.minLength(6)]]\n      });\n    } else {\n      const temp = new Map<string, string>();\n      this.name = this.product.customOption.name;\n      for (const key in this.product.customOption) {\n        if (key !== 'name') {\n          temp.set(key, this.product.customOption[key]);\n        }\n      }\n      const keys = [...temp.keys()];\n      const group = {};\n      for (let i = 0; i < keys.length; i++) {\n        group[`${keys[i]}`] = [temp.get(`${keys[i]}`), [Validators.required, Validators.pattern('^[a-zA-Z]+$'), Validators.maxLength(10), Validators.minLength(6)]];\n      }\n      this.optionCount = keys.length + 1;\n      group[`${this.optionCount}`] = ['', [Validators.required, Validators.pattern('^[a-zA-Z]+$'), Validators.maxLength(10), Validators.minLength(6)]];\n      this.form = this.formBuilder.group(group);\n      this.product.customOption = [];\n      this.product.customOptions = [];\n    }\n  }\n\nasync addName() {\n    const alert = await this.alertController.create({\n      header: 'Customisation name',\n      inputs: [\n        {\n          name: 'name',\n          placeholder: 'Enter name',\n          type: 'text'\n        }\n      ],\n      buttons: [\n        {\n          text: 'Cancel',\n          role: 'cancel',\n          handler: data => {\n            console.log('Cancel clicked');\n          }\n        },\n        {\n          text: 'Confirm',\n          handler: async data => {\n            this.name = data.name;\n          }\n        }\n      ]\n    });\n    await alert.present();\n  }\n  addControl(){\n    this.optionCount++;\n    this.form.addControl(String(this.optionCount), new FormControl('', Validators.required));\n  }\n\n  removeControl(control){\n    this.form.removeControl(control.key);\n  }\n\n  async submitRequest() {\n    this.product.customOptions = [];\n    this.product.customOption = [];\n    if (this.name !== 'Not set') {\n      const optionCount = this.optionCount;\n      this.isLoading = true;\n      delete this.form.value[optionCount];\n      this.form.value.name = this.name;\n      this.product.customOption = this.form.value;\n      const temp = [];\n      for (const key in this.product.customOption) {\n        if (key !== 'name') {\n          console.log(key);\n          temp.push(this.product.customOption[key]);\n        }\n      }\n      if (new Set(temp).size !== temp.length) {\n        await this.showAlert('Invalid customisation', 'Duplication options are not permitted.');\n        this.isLoading = false;\n        return;\n      }\n      // delete duplicates\n      if (this.product.customOptions.length === 0) {\n        this.product.customOptions.push({\n          name: this.product.customOption.name,\n          data: this.product.customOption,\n          checked: false\n        });\n      } else {\n        for (const key in this.product.customOptions) {\n          if (this.product.customOptions[key].name !== this.product.customOption.name) {\n            this.product.customOptions.push({\n              name: this.product.customOption.name,\n              data: this.product.customOption,\n              checked: false\n            });\n          } else {\n            this.product.customOptions[key].data = this.product.customOption;\n          }\n        }\n      }\n      this.isLoading = false;\n    }\n    else {\n      await this.showAlert('Invalid name', 'Please set the name of your customisation.');\n    }\n  }\n\n  async back() {\n    this.product.customNew = true;\n    await this.modalController.dismiss();\n  }\n\n  async showAlert(header,message) {\n    const alert = await this.alertController.create({\n      header,\n      message,\n      buttons: ['OK'],\n    });\n\n    await alert.present();\n  }\n\n}\n\n\n"],"names":[],"sourceRoot":"webpack:///"}